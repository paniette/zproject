const c="zombicide_maps_",s="zombicide_maps_list",u={getUserMaps(a){try{return JSON.parse(localStorage.getItem(s)||"[]").filter(e=>{var o;return((o=e.metadata)==null?void 0:o.author)===a})}catch(t){return console.error("Error loading maps from localStorage:",t),[]}},getMap(a,t){var e;try{const o=`${c}${t}`,r=JSON.parse(localStorage.getItem(o)||"null");return r&&((e=r.metadata)==null?void 0:e.author)===a?r:null}catch(o){return console.error("Error loading map from localStorage:",o),null}},saveMap(a,t){try{const e=t.id||`map_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;t.id=e,t.metadata||(t.metadata={}),t.metadata.author=a,t.metadata.modified=new Date().toISOString(),t.metadata.created||(t.metadata.created=t.metadata.modified);const o=`${c}${e}`;localStorage.setItem(o,JSON.stringify(t));const r=JSON.parse(localStorage.getItem(s)||"[]"),n=r.findIndex(i=>i.id===e),l={id:e,name:t.name,metadata:t.metadata};return n>=0?r[n]=l:r.push(l),r.sort((i,g)=>{var d,m;const S=((d=i.metadata)==null?void 0:d.modified)||"";return(((m=g.metadata)==null?void 0:m.modified)||"").localeCompare(S)}),localStorage.setItem(s,JSON.stringify(r)),t}catch(e){throw console.error("Error saving map to localStorage:",e),e}},deleteMap(a,t){try{const e=`${c}${t}`;if(!this.getMap(a,t))return!1;localStorage.removeItem(e);const n=JSON.parse(localStorage.getItem(s)||"[]").filter(l=>l.id!==t);return localStorage.setItem(s,JSON.stringify(n)),!0}catch(e){return console.error("Error deleting map from localStorage:",e),!1}}};export{u as localStorageService};
